<html xmlns:tomboy="http://beatniksoftware.com/tomboy" xmlns:link="http://beatniksoftware.com/tomboy/link" xmlns:size="http://beatniksoftware.com/tomboy/size"><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Gnome-session</title><style type="text/css">
        
	body { font-family:'Cantarell'; }
	h1 { font-size: xx-large;
     	     font-weight: bold;
     	     border-bottom: 1px solid black; }
	div.note {
		   position: relative;
		   display: block;
		   padding: 5pt;
		   margin: 5pt; 
		   white-space: -moz-pre-wrap; /* Mozilla */
 	      	   white-space: -pre-wrap;     /* Opera 4 - 6 */
 	      	   white-space: -o-pre-wrap;   /* Opera 7 */
 	      	   white-space: pre-wrap;      /* CSS3 */
 	      	   word-wrap: break-word;      /* IE 5.5+ */ }
	</style></head><body><div class="note" id="Gnome-session"><a name="gnome-session"></a><h1>Gnome-session</h1>
------------------------------------------------------------------------------------------------------
<b><span style="font-size:large">Log-Out/Restart:</span></b>

<b>Logout:</b>

gnome-session-save --logout    #gnome2; ctrl+alt+backspace
OR
DISPLAY=:0 gnome-session-quit --logout --no-prompt  #gnome3



<b>Restart gnome-session:</b>
killall gnome-session


<b>Gnome-session services details:</b>
<a style="color:#3465A4" href="http://gnomeshell.wordpress.com/2011/08/28/manage-the-startup-applications/">http://gnomeshell.wordpress.com/2011/08/28/manage-the-startup-applications/</a> [Manage the startup applications | The GNOME Shell]


---------------------------------------------------------------------------------------------------------

<b><span style="font-size:large">Run a Script On Boot:</span></b>

<b>Method1:</b>

In Ubuntu (and I presume Xubuntu), the file you want is <a style="color:#3465A4" href="/etc/rc.local">/etc/rc.local</a>. This script will be run near or at the end of the boot process. Thus, everything should be up by this time.

Add your script that you want to run on boot process there, for example:
sh <a style="color:#3465A4" href="/home/ivan/iptables.sh">/home/ivan/iptables.sh</a> echo 'Iptable Configured!'
exit0

<a style="color:#3465A4" href="http://askubuntu.com/questions/88589/run-command-at-boot-as-root">http://askubuntu.com/questions/88589/run-command-at-boot-as-root</a>


<b>Method2:</b>


The traditional way to start services in Linux was to place a script in <a style="color:#3465A4" href="/etc/init.d">/etc/init.d</a>, and then use the update-rc.d command (or in RedHat based distros, chkconfig) to enable/disable it. This command, btw, uses some mildly complicated logic to create symlinks in <a style="color:#3465A4" href="/etc/rc#.d">/etc/rc#.d</a>, that control the order of starting services. If you run ls <a style="color:#3465A4" href="/etc/rc2.d">/etc/rc2.d</a> you can see the order that services will be killed (K##xxxx) and started (S##xxxx).

<b>Example:</b>

To do this, make your script executable, copy it to <a style="color:#3465A4" href="/etc/init.d">/etc/init.d</a> and create a symbolic link to the script in <a style="color:#3465A4" href="/etc/rc2.d">/etc/rc2.d</a> if you want it executed in the default multi-user runlevel (runlevel 2). You should rename it with an S followed by the order you want it executed in, respective to the other links in there.

Make script executable:

sudo chmod u+x myscript.sh

Copy it to <a style="color:#3465A4" href="/etc/init.d">/etc/init.d</a>:

sudo cp myscript <a style="color:#3465A4" href="/etc/init.d">/etc/init.d</a>

Create a symlink in rc2.d:

cd <a style="color:#3465A4" href="/etc/rc2.d">/etc/rc2.d</a>

sudo ln -s <a style="color:#3465A4" href="/etc/init.d/myscript.sh">/etc/init.d/myscript.sh</a>

Rename it according to the naming scheme:

sudo mv myscript.sh S70myscript.sh

For more information, see the README files in <a style="color:#3465A4" href="/etc/init.d">/etc/init.d</a> and <a style="color:#3465A4" href="/etc/rc2.d">/etc/rc2.d</a>.

<a style="color:#3465A4" href="http://askubuntu.com/questions/72123/how-to-write-an-init-script-that-will-execute-an-existing-start-script">http://askubuntu.com/questions/72123/how-to-write-an-init-script-that-will-execute-an-existing-start-script</a>


<b>Upstart:</b>

Upstart uses job definition files in <a style="color:#3465A4" href="/etc/init">/etc/init</a> to define on what events a service should be started. So, while the system is booting, upstart processes various events, and then can start multiple services in parallel. This allows them to fully utilize the resources of the system, for instance, by starting a disk-bound service up while another CPU-bound service runs, or while the network is waiting for a dynamic IP address to be assigned.

You can see all of the upstart job files by running ls <a style="color:#3465A4" href="/etc/init/*.conf">/etc/init/*.conf</a>

Let me just stop here and say that if you don't know what a service is, or what it does, DO NOT disable it!

Not all services have been converted to upstart. While working on the server team at Canonical for the past few months, I've worked on a number of converted job files, and the nicest part is that it allows one to get rid of all the script "magic" and just put in a few commands here and there to define exactly how to start the service, and nothing more. But for now, only a handful of traditional network services, like squid and samba, have been converted.

<b>Example1:</b>

Create a file <a style="color:#3465A4" href="/etc/init/bruce_script.conf">/etc/init/bruce_script.conf</a> (you need to create the file as root) containing something like this:

description "Bruce's boot script"
start on filesystem and net-device-up IFACE=eth0
task
exec su -c '/home/bruce/script' bruce

<b>Example2:</b>

Simply place this file my_script.conf into <a style="color:#3465A4" href="/etc/init">/etc/init</a>

# Start when pc starts up
start on runlevel [2345]
# Stop when pc shuts down 
stop on runlevel [016]

# Start Script 
exec my_start_script
# Stop Script 
pre-stop my_stop_script
The Pre Stop will script contain code to kill your 3 process and is optional, when the service is stopped sigterm will be sent to the my_start_script process but depending on your script it may already have exited.

You can test your new service by running sudo service my_script start and sudo service my_script stop


<b>Disable service from running at boot:</b>

Starting with the version of upstart that will be in 11.04, there is a new keyword that disables the 'start on' and 'stop on' stanzas, it is 'manual'. So another way to disable the service as of 11.04 is to do:

command using sudo
echo 'manual' | sudo tee <a style="color:#3465A4" href="/etc/init/mysql.override">/etc/init/mysql.override</a>

command from root shell
echo manual &gt;&gt; <a style="color:#3465A4" href="/etc/init/smbd.conf">/etc/init/smbd.conf</a>

<b>Gui-Tools:</b>

bum
jobs-admin  #support upstart.







<b>source:</b>
<a style="color:#3465A4" href="http://askubuntu.com/questions/19320/whats-the-recommend-way-to-enable-disable-services/20347#20347">http://askubuntu.com/questions/19320/whats-the-recommend-way-to-enable-disable-services/20347#20347</a>

<a style="color:#3465A4" href="http://askubuntu.com/questions/9806/getting-a-script-to-run-on-boot-not-on-login">http://askubuntu.com/questions/9806/getting-a-script-to-run-on-boot-not-on-login</a>



<b>Method3:</b>

Add the path of the script under  <a style="color:#3465A4" href="~/.profile">~/.profile</a> . For example adding line like this: <a style="color:#3465A4" href="~/.scripts/batteryfull.sh">~/.scripts/batteryfull.sh</a> .

<b>Method4:</b>

using cron. The special time value of @reboot will spawn your job at each reboot as your user. For example, run crontab -e and use:

@reboot <a style="color:#3465A4" href="/home/yourself/bin/some_script_to_run">/home/yourself/bin/some_script_to_run</a>
For more details on the special time formats, see man 5 crontab.


or use gnome-schedule.


<b>Method5:</b>

Add the link to the Startup Applications application in Ubuntu if you want to use the GUI. The downside of this is that it will only execute when you log in to the GUI (i.e. not for other users, and not if you don't log in to the Ubuntu Desktop environment).

-------------------------------------------------------------------------------------------------------------------------------------------------------

<b><span style="font-size:large">Run a script only at the very first boot:</span></b>

<b>example1:</b>

Combining the first two answers Assuming you name your script <a style="color:#3465A4" href="/usr/local/bin/firstboot.sh">/usr/local/bin/firstboot.sh</a> put it at the end of <a style="color:#3465A4" href="/etc/rc.local">/etc/rc.local</a> (this scripts runs on every boot) the scripts goes like this

#!/bin/bash

FLAG="/var/log/firstboot.log"
if [ ! -f $FLAG ]; then
   #Put here your initialization sentences
   echo "This is the first boot"

   #the next line creates an empty file so it won't run the next boot
   touch $FLAG
else
   echo "Do nothing"
fi


<b>example2:</b>

start on desktop-session-start
task

env FLAGFILE=/run/.my_script_has_run

pre-start script
  if [ -e $FLAGFILE ]; then
    stop
  fi
end script

script
  ...
  touch $FLAGFILE
end script

This assumes Ubuntu 11.10 or later. Use <a style="color:#3465A4" href="/var/run">/var/run</a> for earlier releases. /run is cleared after every reboot, so this will be run again on the next boot, but never again. It will stop normally after the touch statement, so there's no need for a 'stop on'.

<a style="color:#3465A4" href="http://askubuntu.com/questions/106941/how-do-i-run-a-script-once-and-only-once-in-upstart">http://askubuntu.com/questions/106941/how-do-i-run-a-script-once-and-only-once-in-upstart</a>

<a style="color:#3465A4" href="http://askubuntu.com/questions/156771/run-a-script-only-at-the-very-first-boot">http://askubuntu.com/questions/156771/run-a-script-only-at-the-very-first-boot</a>


----------------------------------------------------------------------------------------------------</div></body></html>